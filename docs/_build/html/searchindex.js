Search.setIndex({"docnames": ["apidocs", "datamodel", "index", "quickstart", "single_step_example", "steps", "training"], "filenames": ["apidocs.rst", "datamodel.rst", "index.rst", "quickstart.rst", "single_step_example.rst", "steps.rst", "training.rst"], "titles": ["API Documentation", "Kazu data model", "Welcome to Kazu\u2019s documentation!", "Quickstart", "&lt;no title&gt;", "Steps", "TBA"], "terms": {"class": [0, 5], "kazu": [0, 3, 4, 5], "data": [0, 2, 3, 4, 5], "charspan": 0, "start": 0, "int": [0, 5], "end": 0, "sourc": [0, 5], "A": [0, 1, 5], "concept": [0, 1, 5], "similar": 0, "spaci": 0, "span": 0, "except": 0, "i": [0, 1, 3, 4, 5], "charact": 0, "index": [0, 5], "base": [0, 1, 3, 5], "rather": 0, "than": [0, 5], "token": [0, 5], "is_completely_overlap": 0, "other": 0, "true": [0, 5], "complet": 0, "overlap": 0, "thi": [0, 3, 5], "param": [0, 5], "return": [0, 1, 3, 4, 5], "is_partially_overlap": 0, "partial": 0, "entiti": [0, 1, 5], "match": [0, 5], "str": [0, 5], "entity_class": 0, "type": 0, "frozenset": 0, "namespac": 0, "map": [0, 5], "set": [0, 3], "factori": 0, "metadata": [0, 1], "dict": [0, 5], "ani": [0, 5], "syn_term_to_synonym_term": 0, "synonymtermwithmetr": 0, "gener": [0, 1, 5], "repres": 0, "uniqu": 0, "string": [0, 2, 3], "note": [0, 3], "sinc": 0, "an": [0, 1, 3, 5], "can": [0, 5], "consist": [0, 5], "multipl": [0, 5], "we": [0, 3, 5], "have": 0, "defin": [0, 5], "semant": 0, "add_map": 0, "deprec": 0, "as_brat": 0, "self": [0, 5], "third": 0, "parti": 0, "biomed": [0, 5], "nlp": [0, 3], "brat": 0, "format": 0, "see": [0, 3], "doc": [0, 1, 3, 4, 5], "classmethod": 0, "from_span": 0, "list": [0, 1, 3, 4, 5], "tupl": [0, 5], "text": [0, 1, 3, 5], "join_str": 0, "kwarg": 0, "creat": [0, 1, 3, 4, 5], "instanc": [0, 1, 3, 5], "from": [0, 1, 3, 4, 5], "indic": [0, 5], "underli": [0, 5], "also": [0, 5], "requir": [0, 3, 5], "produc": 0, "us": [0, 3, 5], "join": 0, "togeth": 0, "all": 0, "ar": [0, 1, 3, 5], "encompass": 0, "onli": [0, 3, 5], "one": [0, 3], "both": 0, "thei": 0, "If": [0, 5], "becom": 0, "patholog": 0, "while": 0, "mai": [0, 1, 3, 4, 5], "technic": 0, "sens": 0, "distinct": 0, "mean": 0, "For": [0, 5], "consid": 0, "case": 0, "where": 0, "want": [0, 3, 5], "select": 0, "longest": 0, "annot": 0, "suggest": 0, "some": [0, 3], "ner": [0, 1, 2], "system": 0, "1": 0, "patient": 0, "ha": [0, 3, 5], "metastat": 0, "liver": 0, "cancer": 0, "entity1": 0, "16": [0, 5], "39": 0, "entity2": 0, "27": 0, "40": 0, "result": [0, 3, 5], "part": 0, "same": 0, "2": [0, 5], "non": [0, 5], "contigu": [0, 5], "lung": 0, "0": [0, 1, 3, 4], "4": 0, "1521": 0, "9": 0, "21": [0, 3], "fals": [0, 5], "paramet": [0, 5], "default_label": 0, "parser_nam": 0, "idx": 0, "strategi": 0, "confid": [0, 5], "linkrank": 0, "fulli": 0, "disambigu": 0, "kb": 0, "pytorch": 0, "hfdataset": [0, 5], "encod": [0, 5], "batchencod": [0, 5], "model": [0, 2, 5], "hf_lightning_wrapp": 0, "plautomodel": 0, "automodel": 0, "arg": 0, "predict_step": 0, "batch": [0, 5], "batch_idx": 0, "dataloader_idx": 0, "option": [0, 5], "none": [0, 5], "step": [0, 1, 2, 4], "function": [0, 3], "call": [0, 5], "dure": 0, "predict": [0, 5], "By": 0, "default": [0, 3], "forward": 0, "overrid": [0, 5], "add": 0, "process": [0, 1, 3, 4, 5], "logic": 0, "The": [0, 1, 5], "scale": 0, "infer": [0, 5], "multi": 0, "devic": 0, "To": [0, 3], "prevent": 0, "oom": 0, "error": 0, "possibl": [0, 5], "basepredictionwrit": 0, "callback": 0, "write": 0, "disk": 0, "databas": 0, "after": 0, "each": 0, "epoch": 0, "should": 0, "spawn": 0, "acceler": 0, "happen": 0, "trainer": [0, 5], "ddp_spawn": 0, "train": [0, 2], "8": 0, "tpu": 0, "core": 0, "won": 0, "t": [0, 5], "exampl": [0, 3], "mymodel": 0, "lightningmodul": 0, "def": 0, "dm": 0, "gpu": 0, "current": [0, 3], "dataload": [0, 5], "output": 0, "plautomodelfortokenclassif": 0, "automodelfortokenclassif": [0, 5], "pipelin": [0, 2], "faileddocsfilehandl": 0, "log_dir": 0, "path": [0, 3, 5], "implement": 0, "log": 0, "directori": [0, 3], "along": 0, "messag": 0, "faileddocshandl": 0, "somehow": 0, "handl": [0, 5], "fail": [0, 1, 3, 4], "faileddocsloghandl": 0, "warn": 0, "load_step": [0, 3], "cfg": [0, 3], "dictconfig": 0, "basestep": [0, 3], "load": 0, "util": 0, "cach": [0, 5], "entitylinkinglookupcach": 0, "lookup_cache_s": [0, 5], "5000": [0, 5], "simpl": [0, 5], "wrapper": [0, 5], "around": [0, 1], "lfucach": 0, "reduc": 0, "expens": 0, "e": [0, 5], "g": 0, "bert": [0, 5], "check_lookup_cach": 0, "iter": 0, "check": 0, "synonym": 0, "term": 0, "relev": 0, "found": [0, 5], "updat": [0, 3, 5], "accordingli": 0, "miss": 0, "further": 0, "link_index": 0, "cdisttensorembeddingindex": 0, "parser": 0, "ontologypars": 0, "calcul": 0, "embed": [0, 5], "cosin": 0, "distanc": 0, "dictionaryindex": [0, 5], "boolean_scor": 0, "booleanstringsimilarityscor": 0, "dictionari": 0, "look": 0, "synonymterm": 0, "via": [0, 5], "char": 0, "ngram": 0, "search": [0, 2, 3], "between": 0, "normalis": 0, "version": [0, 3, 5], "queri": [0, 5], "term_norm": 0, "associ": [0, 5], "provid": 0, "top_n": [0, 5], "15": 0, "maximum": [0, 5], "embeddingindex": [0, 5], "ontology_partition_s": 0, "1000": 0, "enumerate_database_chunk": 0, "name": 0, "chunk_siz": 0, "100000": 0, "union": 0, "bool": [0, 5], "float": [0, 5], "split": [0, 5], "up": [0, 5], "datafram": 0, "partit": 0, "ontologi": [0, 5], "size": [0, 5], "partitt": 0, "predict_ontology_embed": 0, "tensor": [0, 5], "memori": 0, "hungri": 0, "input": [0, 5], "manag": 0, "chuck": 0, "them": 0, "sequenti": 0, "number": [0, 5], "set_embedding_model": 0, "embedding_model": [0, 5], "plsapbertmodel": [0, 5], "target": 0, "when": [0, 5], "support": 0, "pl": [0, 5], "configur": [0, 2, 5], "otherwis": 0, "cache_path": 0, "file": 0, "normal": 0, "save": 0, "load_or_build_cach": 0, "force_rebuild_cach": 0, "build": 0, "avail": [0, 3], "instead": 0, "overwrit": 0, "make": 0, "locat": 0, "asset": 0, "dir": 0, "delet": 0, "befor": [0, 5], "attempt": [0, 5], "care": 0, "wa": 0, "matmultensorembeddingindex": 0, "matmul": 0, "tensorembeddingindex": 0, "torch": 0, "entityclassfilt": 0, "required_entity_class": 0, "condit": 0, "create_char_ngram": 0, "": [0, 5], "n": 0, "create_word_ngram": 0, "word": [0, 5], "singl": [0, 1, 3, 4], "space": 0, "separ": 0, "documents_to_document_section_batch_encodings_map": 0, "autotoken": 0, "stride": [0, 5], "128": 0, "max_length": 0, "512": 0, "section": [0, 1, 3, 4, 5], "convert": 0, "documents_to_document_section_text_map": 0, "dochash": 0, "sectionhash": 0, "documents_to_id_section_map": 0, "order": [0, 3], "filter_entities_with_ontology_map": 0, "find": 0, "find_document_from_ent": 0, "given": [0, 3, 5], "belong": 0, "list_map": 0, "web": 0, "server": 0, "deploi": 0, "app": 0, "rai": 0, "serv": 0, "hydra": [0, 2], "datamodel": 1, "document": [1, 3, 4, 5], "run": [1, 2, 5], "over": 1, "origin": [1, 5], "addit": 1, "inform": 1, "ad": 1, "compos": [1, 3], "sequenc": [1, 5], "titl": 1, "bodi": [1, 5], "contain": [1, 3], "detect": [1, 5], "import": [1, 3, 4], "string_preprocess": [1, 3, 4, 5], "scispacy_abbreviation_expans": [1, 3, 4], "scispacyabbreviationexpansionstep": [1, 3, 4, 5], "create_simple_docu": [1, 3, 4], "egfr": [1, 3, 4], "epiderm": [1, 3, 4], "growth": [1, 3, 4], "factor": [1, 3, 4], "receptor": [1, 3, 4], "gene": [1, 3, 4], "so": [1, 3, 4, 5], "two": [1, 3, 4], "success": [1, 3, 4], "failur": [1, 3, 4], "succeed": [1, 3, 4], "print": [1, 3, 4], "get_text": [1, 3, 4, 5], "quickstart": 2, "instal": 2, "pack": 2, "advanc": 2, "preprocess": 2, "link": 2, "api": 2, "modul": 2, "page": 2, "repo": 3, "present": 3, "ensur": 3, "you": [3, 5], "newer": 3, "pip": 3, "In": [3, 5], "major": 3, "need": [3, 5], "which": [3, 5], "pretrain": [3, 5], "tba": 3, "compon": 3, "wrap": [3, 5], "instanti": 3, "larg": [3, 5], "amount": 3, "easiest": 3, "wai": 3, "do": 3, "http": [3, 5], "cc": 3, "intro": 3, "here": 3, "config": [3, 5], "conf": 3, "first": [3, 5], "export": 3, "your": 3, "kazu_config_dir": 3, "environ": 3, "variabl": 3, "kazu_model_pack": 3, "manual": 3, "oc": 3, "env": 3, "o": 3, "initialize_config_dir": 3, "config_dir": 3, "get": [3, 5], "config_nam": 3, "our": 3, "take": 3, "argument": 3, "__call__": 3, "depends_on": 5, "subclass": 5, "special": 5, "involv": 5, "destruct": 5, "expand": 5, "abbrevi": 5, "modifi": 5, "valu": 5, "idea": 5, "perform": 5, "pass": 5, "anoth": 5, "offset_map": 5, "offset": 5, "object": 5, "subsequ": 5, "trace": 5, "back": 5, "create_modif": 5, "algorithm": 5, "identifi": 5, "definit": 5, "schwartz": 5, "hearst": 5, "2003": 5, "scispaci": 5, "finder": 5, "rule": 5, "appli": 5, "across": 5, "learnt": 5, "abstract": 5, "throughout": 5, "transformersmodelfortokenclassificationnerstep": 5, "batch_siz": 5, "max_sequence_length": 5, "detect_subspan": 5, "threshold": 5, "entity_splitt": 5, "noncontiguousentitysplitt": 5, "transform": 5, "slide": 5, "window": 5, "don": 5, "fit": 5, "length": 5, "allow": 5, "label": 5, "post": 5, "py": 5, "tokenized_word_processor": 5, "tokenizedwordprocessor": 5, "__init__": 5, "hf": 5, "from_pretrain": 5, "long": 5, "pytorch_lightn": 5, "experiment": 5, "nest": 5, "must": 5, "frame_to_tok_word": 5, "batch_encod": 5, "number_of_fram": 5, "frame_index": 5, "section_frame_index": 5, "tokenizedword": 5, "depend": 5, "frame": 5, "whether": 5, "last": 5, "differ": 5, "subset": 5, "word_id": 5, "rel": 5, "total": 5, "whole": 5, "id": 5, "get_dataload": 5, "collat": 5, "datacollatorwithpad": 5, "overflow_to_sample_map": 5, "longer": 5, "within": 5, "get_list_of_batch_encoding_frames_for_sect": 5, "section_index": 5, "loader": 5, "get_softmax_predict": 5, "namedtuple_values_indic": 5, "sapbertforentitylinkingstep": 5, "entity_class_to_ontology_map": 5, "min_string_length_to_trigg": 5, "ignore_high_conf": 5, "20": 5, "sapbert": 5, "align": 5, "represent": 5, "paper": 5, "aclanthologi": 5, "org": 5, "2021": 5, "naacl": 5, "main": 5, "334": 5, "pdf": 5, "mention": 5, "shold": 5, "per": 5, "signal": 5, "shorter": 5, "less": 5, "good": 5, "symbol": 5, "techniqu": 5, "perfect": 5, "alreadi": 5, "been": 5, "least": 5, "recent": 5, "lookup": 5, "maintain": 5, "keep": 5, "dictionaryentitylinkingstep": 5, "appropri": 5}, "objects": {"kazu.data": [[0, 0, 0, "-", "data"], [0, 0, 0, "-", "pytorch"]], "kazu.data.data": [[0, 1, 1, "", "CharSpan"], [0, 1, 1, "", "Entity"], [0, 1, 1, "", "Mapping"]], "kazu.data.data.CharSpan": [[0, 2, 1, "", "is_completely_overlapped"], [0, 2, 1, "", "is_partially_overlapped"]], "kazu.data.data.Entity": [[0, 2, 1, "", "add_mapping"], [0, 2, 1, "", "as_brat"], [0, 2, 1, "", "from_spans"], [0, 2, 1, "", "is_completely_overlapped"], [0, 2, 1, "", "is_partially_overlapped"]], "kazu.data.pytorch": [[0, 1, 1, "", "HFDataset"]], "kazu.modelling": [[0, 0, 0, "-", "hf_lightning_wrappers"]], "kazu.modelling.hf_lightning_wrappers": [[0, 1, 1, "", "PLAutoModel"], [0, 1, 1, "", "PLAutoModelForTokenClassification"]], "kazu.modelling.hf_lightning_wrappers.PLAutoModel": [[0, 2, 1, "", "predict_step"]], "kazu.modelling.hf_lightning_wrappers.PLAutoModelForTokenClassification": [[0, 2, 1, "", "predict_step"]], "kazu.pipeline": [[0, 0, 0, "-", "pipeline"]], "kazu.pipeline.pipeline": [[0, 1, 1, "", "FailedDocsFileHandler"], [0, 1, 1, "", "FailedDocsHandler"], [0, 1, 1, "", "FailedDocsLogHandler"], [0, 3, 1, "", "load_steps"]], "kazu": [[0, 0, 0, "-", "steps"]], "kazu.steps": [[5, 1, 1, "", "DictionaryEntityLinkingStep"], [5, 1, 1, "", "SapBertForEntityLinkingStep"], [5, 1, 1, "", "SciSpacyAbbreviationExpansionStep"], [5, 1, 1, "", "StringPreprocessorStep"], [5, 1, 1, "", "TransformersModelForTokenClassificationNerStep"]], "kazu.steps.DictionaryEntityLinkingStep": [[5, 2, 1, "", "__init__"]], "kazu.steps.SapBertForEntityLinkingStep": [[5, 2, 1, "", "__init__"]], "kazu.steps.TransformersModelForTokenClassificationNerStep": [[5, 2, 1, "", "__init__"], [5, 2, 1, "", "frame_to_tok_word"], [5, 2, 1, "", "get_dataloader"], [5, 2, 1, "", "get_list_of_batch_encoding_frames_for_section"], [5, 2, 1, "", "get_softmax_predictions"]], "kazu.utils": [[0, 0, 0, "-", "caching"], [0, 0, 0, "-", "link_index"], [0, 0, 0, "-", "stopwatch"], [0, 0, 0, "-", "utils"]], "kazu.utils.caching": [[0, 1, 1, "", "EntityLinkingLookupCache"]], "kazu.utils.caching.EntityLinkingLookupCache": [[0, 2, 1, "", "check_lookup_cache"]], "kazu.utils.link_index": [[0, 1, 1, "", "CDistTensorEmbeddingIndex"], [0, 1, 1, "", "DictionaryIndex"], [0, 1, 1, "", "EmbeddingIndex"], [0, 1, 1, "", "Index"], [0, 1, 1, "", "MatMulTensorEmbeddingIndex"], [0, 1, 1, "", "TensorEmbeddingIndex"]], "kazu.utils.link_index.DictionaryIndex": [[0, 2, 1, "", "search"]], "kazu.utils.link_index.EmbeddingIndex": [[0, 2, 1, "", "enumerate_database_chunks"], [0, 2, 1, "", "predict_ontology_embeddings"], [0, 2, 1, "", "search"], [0, 2, 1, "", "set_embedding_model"]], "kazu.utils.link_index.Index": [[0, 2, 1, "", "add"], [0, 2, 1, "", "load"], [0, 2, 1, "", "load_or_build_cache"], [0, 2, 1, "", "save"]], "kazu.utils.utils": [[0, 1, 1, "", "EntityClassFilter"], [0, 3, 1, "", "create_char_ngrams"], [0, 3, 1, "", "create_word_ngrams"], [0, 3, 1, "", "documents_to_document_section_batch_encodings_map"], [0, 3, 1, "", "documents_to_document_section_text_map"], [0, 3, 1, "", "documents_to_id_section_map"], [0, 3, 1, "", "filter_entities_with_ontology_mappings"], [0, 3, 1, "", "find_document_from_entity"]], "kazu.web": [[0, 0, 0, "-", "server"]], "kazu.web.server": [[0, 3, 1, "", "start"]]}, "objtypes": {"0": "py:module", "1": "py:class", "2": "py:method", "3": "py:function"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "class", "Python class"], "2": ["py", "method", "Python method"], "3": ["py", "function", "Python function"]}, "titleterms": {"api": 0, "document": [0, 2], "kazu": [1, 2], "data": 1, "model": [1, 3], "welcom": 2, "": 2, "tabl": 2, "content": 2, "site": 2, "index": 2, "quickstart": 3, "instal": 3, "pack": 3, "run": 3, "step": [3, 5], "advanc": 3, "pipelin": 3, "configur": 3, "hydra": 3, "string": 5, "preprocess": 5, "current": 5, "implement": 5, "stringpreprocessorstep": 5, "ner": 5, "link": 5, "tba": 6}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 6, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 56}})
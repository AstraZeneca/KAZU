Turned on 'strict' mypy checking (with some exceptions as to the exact flags used), and fixed issues that this raised.
